// Simplified Tree Layers Control for Leaflet
L.Control.Layers.Tree = L.Control.Layers.extend({
    initialize: function(baseLayers, overlays, options) {
        this._layerControlInputs = [];
        this._layers = [];
        this._lastZIndex = 0;
        this._handlingClick = false;
        
        for (var i in baseLayers) {
            this._addLayer(baseLayers[i], i);
        }
        
        for (var i in overlays) {
            this._addLayer(overlays[i], i, true);
        }
        
        L.setOptions(this, options);
    },
    
    onAdd: function(map) {
        this._initLayout();
        this._update();
        
        this._map = map;
        map.on('zoomend', this._checkDisabledLayers, this);
        
        return this._container;
    },
    
    _initLayout: function() {
        var className = 'leaflet-control-layers',
            container = this._container = L.DomUtil.create('div', className);
            
        var form = this._form = L.DomUtil.create('form', className + '-list');
        
        container.appendChild(form);
        
        L.DomEvent.disableClickPropagation(container);
        L.DomEvent.disableScrollPropagation(container);
        
        return container;
    }
});

L.control.layers.tree = function(baseLayers, overlays, options) {
    return new L.Control.Layers.Tree(baseLayers, overlays, options);
};